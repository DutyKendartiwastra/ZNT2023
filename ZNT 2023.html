<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Informasi K3 Backlog</title>
</head>
<body>
    <link rel="stylesheet" href="https://js.arcgis.com/4.24/esri/themes/light/main.css"/>
    <script src="https://js.arcgis.com/4.24/"></script>
    <script>src="https://code.jquery.com/jquery-3.6.1.min.js"</script>
    <!-- Setting Halaman Full Screen -->
    <style>
     html,
     body,
     #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>
    <!-- Mulai Coding Javascript -->
    <script>
     require([
     "esri/Map",
     "esri/views/MapView",
     "esri/layers/GeoJSONLayer",
     "esri/widgets/BasemapToggle"
     ],(
      Map,
      MapView,
      GeoJSONLayer,
      BasemapToggle
      )=>{
      //Simbologi Sample 2023
      let renderer_Sample2023 = {
        type: "simple",  // autocasts as new SimpleRenderer()
        symbol: {
        type: "simple-marker",  // autocasts as new SimpleMarkerSymbol()
          size: 12,
          color: "orange",
          outline: {  // autocasts as new SimpleLineSymbol()
          width: 0.5,
          color: "white"
          }
      }};
      // Pop Up Template Sample 2023
      const popup_Sample2023 = {
        title :"Nomor Entri {Nomor Entry}",
        content : "<li><b>Sumber Informasi</b> : {Sumber Informasi}</li>"+
                  "<li><b>Nomor HP</b> : {Nomor HP}</li>"+
                  "<li><b>Nomor Identifikasi</b> : {Nomor Identifikasi}</li>"+
                  "<li><b>Nama Surveyor</b> : {Nama Surveyor}</li>"+
                  "<li><b>Tanggal Pelaksanaan</b> : {Tanggal Pelaksanaan}</li>"+
                    "<li><b>Jenis Bangunan (B)/ Ruko (R)/ Tanah Kosong (TK)</b> : {Bangunan (B)/Ruko(R)/ Tanah Kosong (TK)}</li>"+
                    "<li><b>Alamat</b> : {Alamat}</li>"+
                    "<li><b>Kelurahan</b> : {Kelurahan}</li>"+
                    "<li><b>Kecamatan</b> : {Kecamatan}</li>"+
                    "<li><b>Koordinat X</b> : {X}</li>"+
                    "<li><b>Koordinat Y</b> : {Y}</li>"+
                    "<li><b>Status Kepemilikan</b> : {Status Kepemilikan}</li>"+
                    "<li><b>Jenis Data</b> : {Jenis Data}</li>"+
                    "<li><b>Tanggal Penawaran/ Transaksi</b> : {Tanggal Penawaran/ Transaksi}</li>"+
                    "<li><b>Harga Penawaran/ Transaksi (Rp.)</b> : {Harga Penawaran/ Transaksi (Rp.)}</li>"+
                    "<li><b>Luas tanah (m2)</b> : {Luas tanah (m2)}</li>"+
                    "<li><b>Lebar Depan (m)</b> : {Lebar Depan (m)}</li>"+
                    "<li><b>Panjang Kebelakang (m)</b> : {Panjang Kebelakang (m)}</li>"+
                    "<li><b>Bentuk Tanah</b> : {Bentuk Tanah}</li>"+
                  "<img src='{Foto}'>",
                [
                {
                // It is also possible to set the fieldInfos outside of the content
                // directly in the popupTemplate. If no fieldInfos is specifically set
                // in the content, it defaults to whatever may be set within the popupTemplate.
                type: "fields", // FieldsContentElement
                fieldInfos: [
                  {
                    fieldName: "Bentuk Tanah",
                    visible: true,
                    label: "Bentuknya Tanah",
                    format: {
                      places: 0,
                      digitSeparator: true
                    }
                  }
                ]}
                ]
      };
      //Insert SHP ZONA 2023
      const Zona2023=new GeoJSONLayer({
        url:"https://raw.githubusercontent.com/DutyKendartiwastra/ZNT2023/main/Zona_lonlat_2023.geojson",
        //renderer:renderer_Zona2023
      });
      //Insert SHP Sample 2023
      const Sample023=new GeoJSONLayer({
        url:"https://raw.githubusercontent.com/DutyKendartiwastra/ZNT2023/main/Sample_lonlat_2023.geojson",
        popupTemplate:popup_Sample2023,
        renderer:renderer_Sample2023
      });
      // Insert Basemap
        const map = new Map({
        basemap:"streets-relief-vector"
      });
      map.add(Zona2023);
      map.add(Sample023);
      // Menampilkan Map ke Bodi HTML
      const View = new MapView({
        container: "viewDiv",
        map: map,
        zoom:12,
        center:[117.46917675050003,0.11673644470944267]
      });
      // Gonta-ganti basemap
      const toggle = new BasemapToggle({
          view: View,
          nextBasemap: "hybrid"
        });
        View.ui.add(toggle, "bottom-left");
      }
     )
    </script>
    <body>
      <div id="viewDiv"></div>
    </body>
</body>
</html>